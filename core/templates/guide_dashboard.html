{% extends "base.html" %}

{% block content %}
<h3 class="mb-4">Guide Dashboard</h3>
<div class="d-flex gap-3 flex-wrap">
    <a class="btn btn-primary" href="/guide-requests/">Guide Requests</a>
    <a class="btn btn-success" href="{% url 'faculty_abstracts' %}">Review Abstracts</a>
</div>

<div class="mt-4">
    <h5>Assigned Group SDGs</h5>
    {% if assigned_groups %}
    <div class="list-group">
        {% for item in assigned_groups %}
        <div class="list-group-item">
            <h6 class="mb-2">Group Leader: {{ item.group.leader.username }}</h6>
            {% if item.sdg and item.sdg.is_submitted %}
            <span class="badge bg-success mb-2">Submitted</span>
            {% if item.sdg.created_at %}
            <div class="mb-2">
                <small class="text-muted">Submitted: {{ item.sdg.created_at|date:"M d, Y H:i" }}</small>
            </div>
            {% endif %}

            {% if item.sdg.sdg1 %}
            <div class="mb-3">
                <p class="mb-1"><strong>SDG:</strong> {{ item.sdg.sdg1 }}</p>
                <p class="mb-0"><strong>Justification:</strong><br>{{ item.sdg.sdg1_justification|default:"-" }}</p>
            </div>
            {% endif %}
            {% if item.sdg.sdg2 %}
            <div class="mb-3">
                <p class="mb-1"><strong>SDG:</strong> {{ item.sdg.sdg2 }}</p>
                <p class="mb-0"><strong>Justification:</strong><br>{{ item.sdg.sdg2_justification|default:"-" }}</p>
            </div>
            {% endif %}
            {% if item.sdg.sdg3 %}
            <div class="mb-3">
                <p class="mb-1"><strong>SDG:</strong> {{ item.sdg.sdg3 }}</p>
                <p class="mb-0"><strong>Justification:</strong><br>{{ item.sdg.sdg3_justification|default:"-" }}</p>
            </div>
            {% endif %}
            {% if item.sdg.sdg4 %}
            <div class="mb-3">
                <p class="mb-1"><strong>SDG:</strong> {{ item.sdg.sdg4 }}</p>
                <p class="mb-0"><strong>Justification:</strong><br>{{ item.sdg.sdg4_justification|default:"-" }}</p>
            </div>
            {% endif %}
            {% if item.sdg.sdg5 %}
            <div class="mb-0">
                <p class="mb-1"><strong>SDG:</strong> {{ item.sdg.sdg5 }}</p>
                <p class="mb-0"><strong>Justification:</strong><br>{{ item.sdg.sdg5_justification|default:"-" }}</p>
            </div>
            {% endif %}
            {% else %}
            <span class="badge bg-secondary">Not Submitted</span>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-muted">No assigned groups yet.</p>
    {% endif %}
</div>
{% endblock %}